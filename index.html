<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鸡尾酒选择器</title>
    <!-- 引入Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics-compat.js"></script>
    
    <!-- 你的其他样式保持不变 -->
    <style>
        /* 你原有的所有样式保持不变 */
    </style>
</head>
<body>
    <!-- 你原有的所有HTML内容保持不变 -->
    
    <script>
        // 初始化Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAb7IehvgRm-b2o_yJ3SkdQDWwjy7ugC6I",
            authDomain: "cocktail-selector-a1b46.firebaseapp.com",
            projectId: "cocktail-selector-a1b46",
            storageBucket: "cocktail-selector-a1b46.appspot.com",
            messagingSenderId: "213382733661",
            appId: "1:213382733661:web:3487fa9ebbb2e0c64652b4",
            measurementId: "G-LC2T6DR3HB"
        };

        // 初始化Firebase应用
        const app = firebase.initializeApp(firebaseConfig);
        const analytics = firebase.analytics(app);
        
        // 初始化Firestore并启用长轮询解决400错误
        const db = firebase.firestore(app);
        db.settings({
            experimentalForceLongPolling: true
        });

        // 启用持久化缓存
        db.enablePersistence()
            .catch((err) => {
                console.warn("持久化缓存启用失败:", err);
            });

        // 你原有的其他JavaScript代码保持不变
        
        // 监听连接状态
        db.enableNetwork().then(() => {
            console.log("已连接到Firestore");
        }).catch(error => {
            console.error("网络连接失败:", error);
        });

        // 你的其他功能代码...
    </script>
</body>
</html>